@model NackaPizzaOnline.Models.HomeViewModels.MenyViewModel
@{
    ViewData["Title"] = "Nacka Pizzeria Online";
}
@{
    var ingredients = "";
}

<h2>Meny</h2>

<div class="col-md-8">
    <table class="table">
        @foreach (var item in Model.Dishes)
            {
            <tr>
                <td>
                    <div>
                        <p class="dishName">@item.Name</p>
                        <br />
                        @for (var i = 0; i < item.DishIngredients.Count; ++i)
                        {
                            if (i != item.DishIngredients.Count - 1)
                            {
                                ingredients += item.DishIngredients[i].Ingredient.Name + ", ";
                            }
                            else
                            {
                                if (item.DishIngredients.Count == 1)
                                {
                                    ingredients += item.DishIngredients[i].Ingredient.Name;
                                }
                                else
                                {
                                    ingredients += " och " + item.DishIngredients[i].Ingredient.Name + ".";
                                }
                            }
                        }
                        <p class="ingredientName">@ingredients</p>
                        @{
                            ingredients = "";
                        }
                        <button id="ingredientsbtn" class="btn btn-default" asp-controller="Home" asp-action="GetDishInfoForModal" asp-route-id="@item.DishId">
                            <span class="glyphicon glyphicon glyphicon-th"></span>
                        </button>
                        <button id="buybtn" class="btn btn-default">
                            <span class="glyphicon glyphicon glyphicon-shopping-cart"></span>
                        </button>
                    </div>
                </td>
            </tr>
                            }
    </table>
</div>

<div class="col-md-4">
    <div class="cartview">
        @Html.Partial("_CartView")
    </div>
</div>
@*TODO Modal kod, ska kunna välja ingredienser, dom som redan finnas ska vara förkryssade, och att om man väljer nya så kommer dom sparas ner.*@
<div id="ingredientModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        @Html.Partial("_CustomizeView");
    </div>
</div>

@section Scripts{
    <script type="text/javascript" src="~/js/HomeIndex.js"></script>
}